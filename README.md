# Corvina seed #

Command line tools to create entities in corvina in bulk

> **Note:** We test the app template generated by this command on the following platforms:
>
> - Ubuntu 20+
> - macOS 11+
> - Windows 11 with WSL2

## USAGE ##

Example that creates 100 devices and 100 device groups in corvina.fog:

### run ###

```bash
npx @corvina/corvina-seed@latest run \
  --origin https://app.corvina.fog:10443 \
  --keycloak-origin https://auth.corvina.fog:10443 \
  --keycloak-master-user keycloak-admin \
  --keycloak-master-pass keycloak-admin \
  --admin-user admin@exor \
  --device-count 10 \
  --device-group-count 10
```

Example that creates 10 devices and 10 device groups in corvina minikube:

```bash
npx @corvina/corvina-seed@latest run \
  --origin https://app.corvina.mk \
  -ko https://auth.corvina.mk \
  -ku corvina-core-keycloak-admin \
  -kp password \
  -lmu corvina-license-manager-keycloak-admin \
  -lmp password \
  -d 10 \
  -dg 10
```

Example that creates 10 sub organization tree in the users organization

```bash
npx @corvina/corvina-seed@latest run \
  --origin https://app.corvina.mk \
  -ko https://auth.corvina.mk \
  -ku corvina-core-keycloak-admin \
  -kp password \
  -lmu corvina-license-manager-keycloak-admin \
  -lmp password \
  -org 10 \
  -otd 3
```

### master-token ###

Echo the access token of the keycloak admin

```bash
npx @corvina/corvina-seed@latest master-token
```

### device-authz ###

If you want to call Corvina's API using device certificate, this command will help you!

```bash
npx @corvina/corvina-seed@latest device-authz
```

Under the hood, this command will:

- create a device
- create a service account associated with the device
- create a folder with the device certificate and key

## DEVELOP ON THIS REPO ##

If you want to develop on this repo, you need to install the following softwares:

- [Node.js](https://nodejs.org/en/) (version 18+)
- [Go](https://golang.org/) (version 1.20+)
- [corvina-k8s] corvina compose up and running

You can run the CLI in development mode by running the following command:

```bash
go run main.go
```
